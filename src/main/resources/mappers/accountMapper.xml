<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.TmT.dao.AccountDao">

	<!-- 자유 계좌 조회 -->
	<select id="findFreeAccounts" parameterType="Long"
		resultType="FreeAccountDTO">
		SELECT
		account_id,
		account_number,
		account_name,
		bank_name,
		balance
		FROM
		Account
		WHERE
		member_id = #{memberId}
		AND
		account_type = "free"
	</select>
	
		<!-- 적금 계좌 조회 -->
	<select id="findSavingsAccounts" parameterType="Long"
		resultType="SavingsAccountDTO">
		SELECT
		account_id,
		account_number,
		account_name,
		bank_name,
		balance,
		maturity_date,
		interest_rate
		FROM
		Account
		WHERE
		member_id =
		#{memberId}
		AND
		account_type = "savings"
	</select>
	
	    <!-- Account 잔액 합계 조회 -->
    <select id="getTotalBalance" parameterType="Long" resultType="BalanceDTO">
        SELECT SUM(balance) AS total FROM Account WHERE member_id = #{memberId}
    </select>
	
	
		<!-- 적금 계좌 조회 -->
	<select id="findSavingsAccountByAccountId"
		resultType="SavingsAccountDTO">
		SELECT
		account_id,
		balance,
		bank_name,
		maturity_date,
		interest_rate,
		account_name
		FROM
		Account
		WHERE
		account_id = #{accountId}
		AND
		account_type = "savings"
	</select>
	
		<select id="findFreeAccountByAccountId" parameterType="Long"
		resultType="FreeAccountDTO">
		SELECT
		account_id,
		account_number,
		account_name,
		bank_name,
		balance
		FROM
		Account
		WHERE
		account_id = #{accountId}
		AND
		account_type = "free"
	</select>
	
	
	
		<!-- 계좌 조회 (동적 쿼리로 계좌 유형별 조회) -->
	<select id="findAccountsBySearchCondition" parameterType="SearchCondition"
		resultType="AccountDTO">
				SELECT
				account_id,
				account_number,
				account_name,
				bank_name,
				balance
				FROM Account
				WHERE member_id = #{memberId} 
	</select>

</mapper>